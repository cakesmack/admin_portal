{% extends "base.html" %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>User Management</h2>
  <a href="{{ url_for('main.create_user') }}" class="btn btn-primary">
    <i class="fas fa-plus"></i> Create New User
  </a>
</div>

<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Status</th>
            <th>Last Login</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user.full_name }}</td>
            <td>{{ user.email }}</td>
            <td>
              <span
                class="badge bg-{{ 'primary' if user.role == 'admin' else 'secondary' }}"
              >
                {{ user.role.title() }}
              </span>
            </td>
            <td>
              <span
                class="badge bg-{{ 'success' if user.is_active else 'danger' }}"
              >
                {{ 'Active' if user.is_active else 'Inactive' }}
              </span>
              {% if user.must_change_password %}
              <span class="badge bg-warning">Must Change Password</span>
              {% endif %}
            </td>
            <td>
              {% if user.last_login %} {{ user.last_login.strftime('%Y-%m-%d
              %H:%M') }} {% else %}
              <span class="text-muted">Never</span>
              {% endif %}
            </td>
            <td>
              <a
                href="{{ url_for('main.user_profile', user_id=user.id) }}"
                class="btn btn-sm btn-outline-primary"
                >View</a
              >
              <a
                href="{{ url_for('main.edit_user', user_id=user.id) }}"
                class="btn btn-sm btn-outline-secondary"
                >Edit</a
              >
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
