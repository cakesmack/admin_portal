{% extends "base.html" %} {% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>Archived Callsheets - {{ title }}</h2>
  <div>
    <a href="{{ url_for('main.callsheets') }}" class="btn btn-secondary">
      <i class="bi bi-arrow-left"></i> Back to Current Callsheets
    </a>
    <button class="btn btn-primary" onclick="window.print()">
      <i class="bi bi-printer"></i> Print
    </button>
  </div>
</div>

<div class="alert alert-info">
  <strong>Archive Information:</strong><br />
  Archived by: {{ archived_by }}<br />
  Archived on: {{ archived_at.strftime('%Y-%m-%d %H:%M') }}
</div>

{% for callsheet in archive_data %}
<div class="card mb-3">
  <div class="card-header">
    <h5>{{ callsheet.name }} - {{ callsheet.day_of_week }}</h5>
  </div>
  <div class="card-body">
    <table class="table table-sm">
      <thead>
        <tr>
          <th>Customer Account</th>
          <th>Customer Name</th>
          <th>Called</th>
          <th>Called By</th>
          <th>Order Placed</th>
          <th>Order Details</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        {% for entry in callsheet.entries %}
        <tr>
          <td>{{ entry.customer_account }}</td>
          <td>{{ entry.customer_name }}</td>
          <td>
            {% if entry.called %}
            <span class="badge bg-success">Yes</span>
            {% else %}
            <span class="badge bg-secondary">No</span>
            {% endif %}
          </td>
          <td>{{ entry.called_by_name or '-' }}</td>
          <td>
            {% if entry.order_placed %}
            <span class="badge bg-success">Yes</span>
            {% else %}
            <span class="badge bg-secondary">No</span>
            {% endif %}
          </td>
          <td>{{ entry.order_details or '-' }}</td>
          <td>{{ entry.notes or '-' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endfor %} {% endblock %}
